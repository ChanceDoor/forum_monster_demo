<%= form_for [@forum, @topic] do |f| %>
<% if @topic.errors.any? %>
  <% flash.now[:error] = @topic.errors.full_messages.join(', 以及 ') %>
<% end %>
<div class="module">
  <div class="module_header"><%= action_name.humanize %> 主题</div>
    <div class="module_subheader smaller"></div>
    <div class="module_body">
      <div class="fieldset">
        <span class="label indent smaller">
          <%= f.label "题目" %><br />
          <small>(必填)</small>
        </span>
        <span class="input indent smaller"><%= f.text_field :title, :size => 75 %></span>
        <div class="clear"></div>
      </div>
      <% unless @topic.id %>
      <div class="fieldset">
        <span class="label indent smaller">
          <%= f.label "内容" %><br />
          <small>(必填)</small>
        </span>
        <span class="input indent smaller"><%= f.text_area :body, :cols => 60, :rows => 15 %></span>
        <div class="clear"></div>
      </div>
    </div>
    <% end %>
    <div class="module_footer">
      <div class="fieldset">
        <span class="input"><%= f.submit "发表" %> or <%= link_to "取消", @topic.new_record? ?  @forum : @topic %></span>
        <div class="clear"></div>
      </div>
    </div>
  </div>
</div>
<% end %>
